<script>
    import Navbarusuario from "$lib/Navbarusuario.svelte";
    import { onMount } from "svelte";

    function generarPDF() {
        const { jsPDF } = window.jspdf; 
        const doc = new jsPDF();
        // T√≠tulo
        doc.setFont("helvetica", "bold");
        doc.setFontSize(18);
        doc.text("CERTIFICADO DE INCAPACIDAD M√âDICA", 20, 20);

        // L√≠nea divisoria
        doc.setLineWidth(0.5);
        doc.line(20, 25, 190, 25);

        // Contenido
        doc.setFont("times", "normal");
        doc.setFontSize(12);
        doc.text("Estimado/a paciente,", 20, 40);
        doc.text(
            "Por medio del presente, le informamos que debido a su condici√≥n m√©dica, se le ha otorgado una incapacidad m√©dica de", 
            20, 50, { maxWidth: 170 }
        );
        doc.setFont("times", "bold");
        doc.text("7 d√≠as (1 semana)", 20, 60);
        doc.setFont("times", "normal");
        doc.text(
            "Durante este per√≠odo, se recomienda reposo absoluto y el seguimiento de las indicaciones m√©dicas brindadas.",
            20, 70, { maxWidth: 170 }
        );

        doc.text(
            "En caso de requerir una extensi√≥n de la incapacidad o presentar s√≠ntomas adicionales, le recomendamos acudir nuevamente a consulta m√©dica.",
            20, 85, { maxWidth: 170 }
        );

        // Espacio para la firma
        doc.text("Atentamente,", 20, 120);
        doc.text("__________________________", 20, 135);
        doc.text("Dr. Adm", 20, 145);
        doc.text("M√©dico General", 20, 155);

        // Guardar PDF
        doc.save("Incapacidad_Medica.pdf");
    }
</script>
<style>
    .container {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        padding: 40px;
        gap: 20px;
    }

    .left, .right {
        width: 25%;
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }

    .center {
        width: 50%;
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .full-width-card {
        margin-top: 20px;
        width: 100%;
        background: #f1f1f1;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    h1 {
        color: #333;
        font-size: 24px;
        margin-bottom: 15px;
    }

    h2 {
        color: #007BFF;
        font-size: 20px;
        margin-bottom: 10px;
    }

    p {
        color: #555;
        font-size: 16px;
        line-height: 1.5;
    }

    .button {
        background: #007BFF;
        color: white;
        padding: 12px 24px;
        font-size: 18px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 20px;
        transition: background 0.3s ease;
    }

    .button:hover {
        background: #0056b3;
    }

    /* Dise√±o responsivo */
    @media (max-width: 768px) {
        .container {
            flex-direction: column;
            align-items: center;
        }

        .left, .right, .center {
            width: 100%;
            margin-bottom: 20px;
        }
    }
</style>

<Navbarusuario />

<!-- Tarjeta de recomendaciones m√©dicas ocupando toda la pantalla -->
<div class="container">
    <div class="full-width-card bg-light">
        <h2>üîπ Recomendaciones M√©dicas Generales üîπ</h2>
        <p>Para garantizar una pronta recuperaci√≥n, es importante seguir estas recomendaciones adicionales:</p>
        <ul>
            <p>Evitar el contacto con personas enfermas para prevenir comppcaciones.</p>
            <p>Descansar lo suficiente y no interrumpir el tratamiento antes de tiempo.</p>
            <p>Mantener una apmentaci√≥n balanceada con frutas y verduras para reforzar el sistema inmunol√≥gico.</p>
            <p>Evitar el consumo de alcohol y tabaco durante el periodo de recuperaci√≥n.</p>
            <p>Si persisten los s√≠ntomas, acudir de inmediato a una consulta m√©dica.</p>
        </ul>
    </div></div>
<div class="container">
    <!-- Columna izquierda -->
    <div class="left">
        <h2>‚ö†Ô∏è Recuerda que si empeoras...</h2>
        <p>Debes acudir inmediatamente a consulta m√©dica si presentas fiebre alta, dificultad para respirar o cualquier otro s√≠ntoma grave.</p>
        <p>Tu salud es importante, asi que no la descuides!</p>
    </div>

    <!-- Columna central -->
    <div class="center">
        <h1>Certificado de Incapacidad M√©dica</h1>
        <p>Estimado paciente, se le ha otorgado una incapacidad m√©dica de <b>7 d√≠as</b>.</p>
        <p>Durante este tiempo, es recomendable seguir las indicaciones m√©dicas y descansar adecuadamente.</p>
        <p>Si los s√≠ntomas persisten, acuda nuevamente al m√©dico.</p>
        
        <button class="button" on:click={generarPDF}>Descargar Incapacidad</button>
    </div>

    <!-- Columna derecha -->
    <div class="right">
        <h2>üìå Indicaciones M√©dicas</h2>
        <ul>
            <li>Reposo absoluto durante la primera fase</li>
            <li>Tomar medicamentos seg√∫n prescripci√≥n</li>
            <li>Hidrataci√≥n constante</li>
            <li>Evitar esfuerzo f√≠sico</li>
            <li>Acudir a revisi√≥n si los s√≠ntomas empeoran</li>
        </ul>
    </div>
</div>
